(()=>{"use strict";function e(e){switch("string"==typeof e?parseInt(e):e){case 0:return{level:"Tidak Stres",emoji:"😊",class:"stress-low",progressClass:"progress-low",percentage:5,color:"#10b981",scaleText:"Level 0/4",description:"Luar biasa! Anda dalam kondisi mental yang sangat baik dan tidak mengalami stres sama sekali. Terus pertahankan pola hidup sehat ini."};case 1:return{level:"Stres Minimal",emoji:"😌",class:"stress-low",progressClass:"progress-low",percentage:25,color:"#10b981",scaleText:"Level 1/4",description:"Kondisi mental Anda sangat baik! Tingkat stres yang minimal menunjukkan Anda dapat mengelola tekanan dengan baik."};case 2:return{level:"Agak Stres",emoji:"😐",class:"stress-medium",progressClass:"progress-medium",percentage:50,color:"#f59e0b",scaleText:"Level 2/4",description:"Anda mulai merasakan sedikit tekanan. Ini adalah waktu yang tepat untuk mulai memperhatikan kesehatan mental dan melakukan langkah preventif."};case 3:return{level:"Cukup Stres",emoji:"😟",class:"stress-high",progressClass:"progress-high",percentage:75,color:"#f59e0b",scaleText:"Level 3/4",description:"Tingkat stres Anda cukup tinggi dan memerlukan perhatian. Penting untuk mulai menerapkan strategi manajemen stres secara konsisten."};case 4:return{level:"Sangat Stres",emoji:"😰",class:"stress-high",progressClass:"progress-high",percentage:95,color:"#ef4444",scaleText:"Level 4/4",description:"Tingkat stres Anda sangat tinggi. Sangat disarankan untuk segera mengambil langkah-langkah serius dalam mengelola stres dan mempertimbangkan bantuan profesional."};default:return{level:"Status Tidak Diketahui",emoji:"❓",class:"stress-medium",progressClass:"progress-medium",percentage:50,color:"#6b7280",scaleText:"Level ?/4",description:"Tidak dapat menentukan tingkat stres. Silakan lakukan Daily Check-In ulang untuk hasil yang akurat."}}}function a(e){return new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}document.addEventListener("DOMContentLoaded",(()=>{if(!localStorage.getItem("currentUser")||!JSON.parse(localStorage.getItem("currentUser")))return alert("Silakan login untuk mengakses Hasil Prediksi."),void(window.location.href="login.html");const n=JSON.parse(localStorage.getItem("lastPrediction")),s=document.getElementById("prediction-results");n?(function(n,s){const t=e(n.prediction);s.innerHTML=`\n    <div class="prediction-card ${t.class}">\n      <div class="prediction-date">\n         ${a(n.date)}\n      </div>\n      \n      <div class="stress-emoji">${t.emoji}</div>\n      \n      <div class="stress-level">${t.level}</div>\n      \n      <div class="stress-description">\n        ${t.description}\n      </div>\n      \n      <div class="stress-meter">\n        <div class="stress-meter-label">Tingkat Stres Anda (${t.scaleText})</div>\n        <div class="stress-progress">\n          <div class="stress-progress-bar ${t.progressClass}" style="width: ${t.percentage}%"></div>\n        </div>\n      </div>\n      \n      <div class="recommendations">\n        <h5>Langkah Selanjutnya</h5>\n        <p>Lakukan Daily Check-In secara rutin untuk monitoring dan gunakan fitur Journaling untuk refleksi diri. Untuk panduan lebih lengkap, klik tombol di bawah ini.</p>\n      </div>\n      \n      <div class="recommendation-cta">\n        <a href="recommendations.html" class="recommendation-button">Lihat Rekomendasi</a>\n      </div>\n    </div>\n  `,setTimeout((()=>{const e=s.querySelector(".stress-progress-bar");e&&(e.style.width="0%",setTimeout((()=>{e.style.width=`${t.percentage}%`}),100))}),500)}(n,s),function(n){const s=JSON.parse(localStorage.getItem("predictionHistory"))||[];if(0===s.length)return;const t=`\n    <div class="history-section">\n      <h5>Riwayat Prediksi</h5>\n      <div class="history-list">\n        ${s.slice(-5).reverse().map((n=>{const s=e(n.prediction);return`\n            <div class="history-item">\n              <div class="history-date">${a(n.date)}</div>\n              <div class="history-level ${s.class}" style="background-color: ${s.color}; color: white;">\n                ${s.emoji} ${s.level}\n              </div>\n            </div>\n          `})).join("")}\n      </div>\n    </div>\n  `;n.insertAdjacentHTML("beforeend",t)}(s)):s.innerHTML='\n    <div class="no-prediction">\n      <div class="no-prediction-emoji">🤔</div>\n      <h4>Belum Ada Hasil Prediksi</h4>\n      <p>Mulai perjalanan kesehatan mental Anda dengan melakukan Daily Check-In terlebih dahulu.</p>\n      <a href="checkin.html" class="cta-button">Mulai Daily Check-In</a>\n    </div>\n  '}));const n=JSON.parse(localStorage.getItem("lastPrediction"));n&&function(e){const a=JSON.parse(localStorage.getItem("predictionHistory"))||[];a.some((a=>a.date===e.date&&a.prediction===e.prediction))||(a.push(e),a.length>10&&a.shift(),localStorage.setItem("predictionHistory",JSON.stringify(a)))}(n)})();